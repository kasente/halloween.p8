pico-8 cartridge // http://www.pico-8.com
version 38
__lua__
-- game loop
function _init()
	map_setup()
	make_player()
end 

function _update()
	move_player()
end --every 30

function _draw()
cls()
draw_map()
draw_player()
end --every 30
	

-->8
-- map code

function map_setup()
	wall=0
	key=1
	door=2
	anim1=3
	anim2=4
	lose=6
	win=7
end

function draw_map()
	map(0,0,0,0,128,64)
end

function is_tile(tile_type,x,y)
	tile=mget(x,y)
	has_flag=fget(tile,tile_type)
	return has_flag
end

function can_move(x,y)
	return not is_tile(wall,x,y)
end
-->8
--player code

function make_player()
p={}
p.x=1
p.y=15
p.sprite=1
p.keys=0
end

function draw_player()
	spr(p.sprite,p.x*8,p.y*8)
end

function move_player()
	newx=p.x
	newy=p.y
	
	if (btnp(⬅️)) newx-=1
	if (btnp(➡️)) newx+=1
	if (btnp(⬆️)) newy-=1
	if (btnp(⬇️)) newy+=1
	
	//pour les flags
	if (can_move(newx,newy)) then
	p.x=mid(0,newx,127)
	p.y=mid(0,newy,63)
	else
	sfx(0)
	end
	end
__gfx__
00000000000300004477774411111111444444444444444444444444111111110000000000000000000000004444444411111111444444440000000000000000
00000000099999004770707411111111445555444444444444bb34441165551100000000000000000000000044444444111111a1444554440000000000000000
007007000909090044777744111111114555555444444444433b3344166666510000000000000000000000004444944411111111445555440000000000000000
00077000099999004477074411111111458558544444444444b33b44665566650000000000000000000000004449a94411a11111445555440000000000000000
0007700009707900447777441111111145555554444444444b333444665566650000000000000000000000004444944411111111445555440000000000000000
0070070000090000444774441111111144588544444444444333b344166665510000000000000000000000004944444411111111445555440000000000000000
000000000033300044444444111111115455554444444444444f4444116655110000000000000000000000009a9444441a1111a1445555440000000000000000
000000000990990044444444111111115445444444444444444f4444111111110000000000000000000000004944444411111111445555440000000000000000
00000000000000000000000000000000555555540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000444544540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000445554540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000445454540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000445454440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000445454440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000455455440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000444444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5050505050506060606050b0505050505050505050505050505050d050505050505050d050506050505050505050505050505050505050505050505050505000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
50505050505060606060505050d0505050505050505050505050505050505050505050505050505050505050b0505050505050505050b0505050505050605000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
50505050505050606060505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505000
__gff__
0010030104008181808001000101000000000101000080808080000000000000000000000000808080800000000000000000000000008080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0303030303030c030303030c030303030303030303030303030303030303030303030c0c0303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
03070707030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030c0303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0c0707070703030303030303030303030303030303030c03030303030303030303030303030303030303030c03030303030303030303030303030303030c030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
030707070703030c03030303030303030c0303030303030c0303030c0303030c0303030303030303030c0303030303030303030303030c03030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
03030707070303030303030c03030303030303030c03030303030303030303030303030303030303030c0303030303030303030c0303030303030c030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030c030303030303030c030303030c03030303030303030303030303030c030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030c03030303030303030303030303030303030303030303030303030303030c0c030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
03030303030c0303030303030c03030303030303030303030303030c030303030303030c03030303030303030c0303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
030303030303030303030303030303030c03030303030303030303030303030c030303030303030c0303030303030303030303030303030303030c030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
030303030303030303030303030c030303030303030c030303030c0303030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030c0303030303030303030303030c0303030303030303030303030303030303030303030303030303030303030303030c03030303030c0303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
030303030303030303030c0303030303030303030303030303030303030303030303030c0c030303030303030303030303030c0303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050b050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050506060605050505050505050505050505050505050505050505050505050505050b0505050505050505050b050505050505050505050506060605050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
050505050606060505050505050505050505050b05050505050d050505050505050505050505050504050505050505050505050505050505050506060605050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
050505050606060505050d050505050505050505050505050505050505050605050505050505050514050505050505050505050505050505050506060605050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
050505050505050505050505050505060606050505050505050505050505050505050505050505050505050505060505050505050d050505050506060605050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05050505050505050b05050505050506060605050505050505050502050505050505050505050d0505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050606060505050505050505050505050505050506060505050505050505020b05050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05050505050d0505050505050505050505050505050505050505050505050505050606060505050505050505050505050605050505050506050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505060605050505050b050505050505050505050505050505050506060605050505050605050505050505050505050505050505050d0505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505060606050505050505050505050505060505050505050505050505050505050b050505050505050505050505050b0505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050b0505050506060605050505050505050505050505050505050d050505050505050505050505050505050d05050505050505050506060605050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505060606050505050505050505050505050505050505050505050505050505050505050505050505050505050505050506060606050b05050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505050205050505050505050b05050505050505050505050505050505050b05050505050505050506060606050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05050505050505050505050505050d05050505050505050506050505050505050505050d050505050506050505050505020505050d050506060605050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
050505050d05050505050505050505050b050505050505050505020505050605050505050505050606060605050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505050505050505050505050505050505050505050505050606060505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
050505050505050505050505050505050505040506050505050505050505050505050505050505060606050505050d0505050505050505050505050b0505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505051405050505050505050b05050505050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050d050506060606050505050505050505050505050505050505050505050505050505050505050d050505050505050506050505050505050d050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
00040000000000d330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
002d00000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
